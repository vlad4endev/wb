# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Ç–∞–π–º–∞—É—Ç–∞ WB API

## –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ `ConnectTimeoutError` –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ WB API –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–∫–ª–∞–¥–æ–≤:
```
Connect Timeout Error (attempted address: suppliers-api.wildberries.ru:443, timeout: 10000ms)
```

## –ü—Ä–∏—á–∏–Ω—ã
1. **–ö–æ—Ä–æ—Ç–∫–∏–π —Ç–∞–π–º–∞—É—Ç** - 10 —Å–µ–∫—É–Ω–¥ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è WB API
2. **–ú–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç** - WB API –º–æ–∂–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ
3. **–°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã** - –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL** - –≤–æ–∑–º–æ–∂–Ω–æ, —ç–Ω–¥–ø–æ–∏–Ω—Ç –∏–∑–º–µ–Ω–∏–ª—Å—è

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–≤–µ–ª–∏—á–µ–Ω —Ç–∞–π–º–∞—É—Ç ‚úÖ
- **–ë—ã–ª–æ**: 10 —Å–µ–∫—É–Ω–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **–°—Ç–∞–ª–æ**: 30 —Å–µ–∫—É–Ω–¥
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `AbortController` —Å `setTimeout(30000)`

### 2. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ ‚úÖ
- **–î–æ–±–∞–≤–ª–µ–Ω—ã –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ URL**:
  - `https://suppliers-api.wildberries.ru/api/v3/warehouses`
  - `https://suppliers-api.wildberries.ru/api/v2/warehouses`
  - `https://suppliers-api.wildberries.ru/warehouses`
- **–õ–æ–≥–∏–∫–∞**: –µ—Å–ª–∏ –æ–¥–∏–Ω URL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π

### 3. –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ ‚úÖ
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- **Graceful fallback** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

### 4. Fallback –¥–∞–Ω–Ω—ã–µ ‚úÖ
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫** –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–∫–ª–∞–¥–æ–≤ WB
- **20 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å–∫–ª–∞–¥–æ–≤** –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

## –ö–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ç–∞–π–º–∞—É—Ç —Å AbortController:
```typescript
const controller = new AbortController();
const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 —Å–µ–∫—É–Ω–¥

const response = await fetch(wbApiUrl, {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json',
    'User-Agent': 'WB-Slots/1.0.0',
    'Accept': 'application/json',
  },
  signal: controller.signal,
});
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏:
```typescript
const wbApiUrls = [
  'https://suppliers-api.wildberries.ru/api/v3/warehouses',
  'https://suppliers-api.wildberries.ru/api/v2/warehouses',
  'https://suppliers-api.wildberries.ru/warehouses',
];

for (let i = 0; i < wbApiUrls.length; i++) {
  try {
    // –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    const response = await fetch(wbApiUrl, { ... });
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
    return processData(data);
  } catch (error) {
    // –ï—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–ø—ã—Ç–∫–∞ - –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
    if (i === wbApiUrls.length - 1) throw error;
    // –ò–Ω–∞—á–µ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É URL
    continue;
  }
}
```

### Fallback –¥–∞–Ω–Ω—ã–µ:
```typescript
function getFallbackWarehouses(): WBWarehouse[] {
  return [
    { id: 117501, name: '–ö–∞–∑–∞–Ω—å', isActive: true },
    { id: 117502, name: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', isActive: true },
    // ... 20 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–∫–ª–∞–¥–æ–≤
  ];
}
```

## –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–æ:
```
Error fetching warehouses from WB API: TypeError: fetch failed
```

### –ü–æ—Å–ª–µ:
```
üîÑ –ü–æ–ø—ã—Ç–∫–∞ 1/3: –ó–∞–ø—Ä–æ—Å –∫ WB API: https://suppliers-api.wildberries.ru/api/v3/warehouses
üì° –û—Ç–≤–µ—Ç WB API: 200 OK
‚úÖ –ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –æ—Ç WB API: 25 —Å–∫–ª–∞–¥–æ–≤
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–£–≤–µ–ª–∏—á–µ–Ω —Ç–∞–π–º–∞—É—Ç** —Å 10 –¥–æ 30 —Å–µ–∫—É–Ω–¥
‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏** —Å —Ä–∞–∑–Ω—ã–º–∏ URL
‚úÖ **Fallback –¥–∞–Ω–Ω—ã–µ** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
‚úÖ **Graceful degradation** - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –±–µ–∑ WB API

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞**: API –æ—Ç–≤–µ—á–∞–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥
2. **–ú–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç**: —Å–∏—Å—Ç–µ–º–∞ –∂–¥–µ—Ç –¥–æ 30 —Å–µ–∫—É–Ω–¥
3. **–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback —Å–ø–∏—Å–æ–∫ —Å–∫–ª–∞–¥–æ–≤
4. **–°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É URL

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Å WB API! üöÄ
